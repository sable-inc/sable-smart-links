<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sable Smart Links - ElementInteractor Comprehensive Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .demo-section {
      margin: 30px 0;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #f9f9f9;
    }

    .demo-element {
      padding: 15px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
      background-color: #fff;
    }

    .hidden-element {
      display: none;
    }

    .demo-input {
      padding: 8px;
      margin: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    button {
      padding: 8px 16px;
      margin: 5px;
      border: none;
      border-radius: 4px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }

    button:hover {
      background-color: #0056b3;
    }

    button:disabled {
      background-color: #6c757d;
      cursor: not-allowed;
    }

    .output {
      background-color: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      font-family: monospace;
      white-space: pre-wrap;
    }

    .highlighted {
      background-color: #e6f3ff;
    }

    .scroll-container {
      height: 200px;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px 0;
    }

    .scroll-content {
      height: 800px;
      background: linear-gradient(to bottom, #f0f0f0, #e0e0e0);
      padding: 20px;
    }
  </style>
</head>

<body>
  <h1>Sable Smart Links - ElementInteractor Comprehensive Example</h1>

  <p>This example demonstrates all the functions available in the ElementInteractor class from the sable-smart-links
    package.</p>

  <!-- Element Selection Section -->
  <div class="demo-section">
    <h2>Element Selection & Querying</h2>
    <div class="demo-element" id="element1">Element 1 (ID: element1)</div>
    <div class="demo-element" class="demo-class">Element with class "demo-class"</div>
    <div class="demo-element" data-test="test-value">Element with data attribute</div>

    <button onclick="testGetElement()">Test getElement</button>
    <button onclick="testGetElements()">Test getElements</button>
    <button onclick="testElementExists()">Test elementExists</button>
    <button onclick="testWaitForElement()">Test waitForElement</button>

    <div class="output" id="selection-output"></div>
  </div>

  <!-- Element Interaction Section -->
  <div class="demo-section">
    <h2>Element Interaction</h2>
    <input type="text" class="demo-input" id="test-input" placeholder="Test input">
    <textarea class="demo-input" id="test-textarea" placeholder="Test textarea"></textarea>
    <button id="test-button">Test Button (Click me!)</button>

    <button onclick="testSetInputValue()">Test setInputValue</button>
    <button onclick="testClickElement()">Test clickElement</button>

    <div class="output" id="interaction-output"></div>
  </div>

  <!-- Element Visibility Section -->
  <div class="demo-section">
    <h2>Element Visibility & Viewport</h2>
    <div class="demo-element" id="visible-element">This element is visible</div>
    <div class="demo-element hidden-element" id="hidden-element">This element is hidden</div>
    <div class="demo-element" id="viewport-test" style="height: 50px; background-color: #ffeb3b;">Viewport test element
    </div>

    <button onclick="testIsElementVisible()">Test isElementVisible</button>
    <button onclick="testIsElementInViewport()">Test isElementInViewport</button>
    <button onclick="testGetComputedStyle()">Test getComputedStyle</button>

    <div class="output" id="visibility-output"></div>
  </div>

  <!-- Element Highlighting Section -->
  <div class="demo-section">
    <h2>Element Highlighting</h2>
    <div class="demo-element" id="highlight-target">This element can be highlighted</div>

    <button onclick="testHighlightElement()">Test highlightElement</button>
    <button onclick="testRestoreElementStyle()">Test restoreElementStyle</button>

    <div class="output" id="highlight-output"></div>
  </div>

  <!-- Scrolling Section -->
  <div class="demo-section">
    <h2>Element Scrolling</h2>
    <div class="scroll-container">
      <div class="scroll-content">
        <div style="height: 300px; background-color: #e3f2fd; padding: 20px;">
          Scroll down to see the target element...
        </div>
        <div class="demo-element" id="scroll-target" style="background-color: #4caf50; color: white;">
          This is the scroll target element
        </div>
        <div style="height: 300px; background-color: #fff3e0; padding: 20px;">
          More content below...
        </div>
      </div>
    </div>

    <button onclick="testScrollIntoView()">Test scrollIntoView</button>

    <div class="output" id="scroll-output"></div>
  </div>

  <!-- Usage Instructions -->
  <div class="demo-section">
    <h3>Usage Instructions</h3>
    <p>To use the ElementInteractor in your own project:</p>
    <pre><code>import { 
  ElementInteractor,
  highlightElement, 
  restoreElementStyle,
  setInputValue,
  clickElement,
  scrollIntoView,
  waitForElement,
  getElement,
  getElements,
  elementExists,
  isElementVisible,
  isElementInViewport,
  getComputedStyle
} from "sable-smart-links/interactor";

// Use as class methods
const element = ElementInteractor.getElement('#my-element');
ElementInteractor.highlightElement(element);

// Or use as individual functions
const element2 = getElement('#my-element');
highlightElement(element2);</code></pre>
  </div>

  <script type="module">
    // Import the interactor module
    import {
      ElementInteractor,
      highlightElement,
      restoreElementStyle,
      setInputValue,
      clickElement,
      scrollIntoView,
      waitForElement,
      getElement,
      getElements,
      elementExists,
      isElementVisible,
      isElementInViewport,
      getComputedStyle
    } from '../dist/interactor/index.js';

    // Store highlight info
    let highlightInfo = null;

    // Global functions for testing
    window.testGetElement = function () {
      const output = document.getElementById('selection-output');
      const element = getElement('#element1');
      output.textContent = `getElement('#element1'): ${element ? 'Found' : 'Not found'}`;
    };

    window.testGetElements = function () {
      const output = document.getElementById('selection-output');
      const elements = getElements('.demo-class');
      output.textContent = `getElements('.demo-class'): Found ${elements.length} elements`;
    };

    window.testElementExists = function () {
      const output = document.getElementById('selection-output');
      const exists = elementExists('[data-test="test-value"]');
      output.textContent = `elementExists('[data-test="test-value"]'): ${exists}`;
    };

    window.testWaitForElement = function () {
      const output = document.getElementById('selection-output');
      output.textContent = 'Waiting for element...';

      // Create a temporary element after a delay
      setTimeout(() => {
        const tempDiv = document.createElement('div');
        tempDiv.id = 'temp-element';
        tempDiv.textContent = 'Temporary element';
        document.body.appendChild(tempDiv);
      }, 1000);

      waitForElement('#temp-element', 3000)
        .then(element => {
          output.textContent = `waitForElement('#temp-element'): Found element with text "${element.textContent}"`;
          // Clean up
          setTimeout(() => {
            if (element.parentNode) {
              element.parentNode.removeChild(element);
            }
          }, 2000);
        })
        .catch(error => {
          output.textContent = `waitForElement error: ${error.message}`;
        });
    };

    window.testSetInputValue = function () {
      const output = document.getElementById('interaction-output');
      const input = document.getElementById('test-input');
      const textarea = document.getElementById('test-textarea');

      setInputValue(input, 'Hello from ElementInteractor!');
      setInputValue(textarea, 'This is a test value for the textarea.');

      output.textContent = `setInputValue: Set values for input and textarea`;
    };

    window.testClickElement = function () {
      const output = document.getElementById('interaction-output');
      const button = document.getElementById('test-button');

      output.textContent = 'Clicking button...';
      clickElement(button, 500); // 500ms delay

      setTimeout(() => {
        output.textContent = 'clickElement: Button clicked with delay';
      }, 1000);
    };

    window.testIsElementVisible = function () {
      const output = document.getElementById('visibility-output');
      const visibleElement = document.getElementById('visible-element');
      const hiddenElement = document.getElementById('hidden-element');

      const visibleResult = isElementVisible(visibleElement);
      const hiddenResult = isElementVisible(hiddenElement);

      output.textContent = `isElementVisible:
Visible element: ${visibleResult}
Hidden element: ${hiddenResult}`;
    };

    window.testIsElementInViewport = function () {
      const output = document.getElementById('visibility-output');
      const viewportElement = document.getElementById('viewport-test');

      const inViewport = isElementInViewport(viewportElement);
      output.textContent = `isElementInViewport: ${inViewport}`;
    };

    window.testGetComputedStyle = function () {
      const output = document.getElementById('visibility-output');
      const element = document.getElementById('viewport-test');

      const backgroundColor = getComputedStyle(element, 'background-color');
      const allStyles = getComputedStyle(element);

      output.textContent = `getComputedStyle:
Background color: ${backgroundColor}
Display: ${allStyles.display}`;
    };

    window.testHighlightElement = function () {
      const output = document.getElementById('highlight-output');
      const element = document.getElementById('highlight-target');

      if (highlightInfo) {
        restoreElementStyle(element, highlightInfo);
        highlightInfo = null;
        output.textContent = 'highlightElement: Element restored';
      } else {
        highlightInfo = highlightElement(element);
        output.textContent = 'highlightElement: Element highlighted';
      }
    };

    window.testRestoreElementStyle = function () {
      const output = document.getElementById('highlight-output');
      const element = document.getElementById('highlight-target');

      if (highlightInfo) {
        restoreElementStyle(element, highlightInfo);
        highlightInfo = null;
        output.textContent = 'restoreElementStyle: Element restored';
      } else {
        output.textContent = 'restoreElementStyle: No highlight to restore';
      }
    };

    window.testScrollIntoView = function () {
      const output = document.getElementById('scroll-output');
      const element = document.getElementById('scroll-target');

      output.textContent = 'Scrolling to element...';
      scrollIntoView(element, { behavior: 'smooth', block: 'center' })
        .then(() => {
          output.textContent = 'scrollIntoView: Element scrolled into view';
        });
    };

    console.log('ElementInteractor comprehensive example loaded successfully!');
  </script>
</body>

</html>